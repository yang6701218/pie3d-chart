!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.pie3djs=e():t.pie3djs=e()}(this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);const r=function(t){console.error(new Error(t))},o=function(t){let e=function(t){let e=Math.max(...t),n=0;return n=1==e.toString().length?e>5?10:e:e.toString().replace(/(\d)(\d)(\d*)/,(function(t,e,n){return n>5?e-0+1+new Array(t.length-1).fill(0).toString().replace(/,/,""):e+5+new Array(t.length-2).fill(0).toString().replace(/,/,"")})),n}(t=t&&t.reduce((t,e)=>(t.push(e.num),t),[]));return t.map(t=>(t/e).toFixed(2))},{Scene:a}=spritejs,{shaders:i}=spritejs.ext3d;const{Cylinder:s,Plane:l,Group3d:c,shaders:u}=spritejs.ext3d;let f={data:[],colors:["#e83030","#be4bd1","#26c7c9","#005d8f","#6e0303"],MAXLEN:8,MINLEN:2,container:"#container",animate:!0,orbit:!0},p=null;const d=function(t){this.options=Object.assign(f,t),this.init()};d.prototype={init:function(){this.options.data.length>this.options.MAXLEN||this.options.data.length<this.options.MINLEN?r("pass data errorï¼šneed 2 to 8 length"):this.options.container?(p=p||function(t){const e=new a({container:t,displayRatio:2}).layer3d("fglayer",{pointLightColor:"#ffffff80",pointLightPosition:[1,3,1],camera:{fov:35}});e.camera.attributes.pos=[3,3,5],e.camera.lookAt([0,0,0]);const n=e.createProgram({...i.NORMAL_GEOMETRY,cullFace:!1});return{layer:e,program:n}}(this.options.container),this.initPieBackGround(),this.createPie(),this.options.orbit&&p.layer.setOrbit()):r("pass container error")},createPie:function(){this.options.rangeData=o(this.options.data);let t=this.groups=function(t,e){let n=[],r=t.data.length,o=360/r;for(let a=0;a<t.data.length;a++){let i=new c,f=new s(e.program,{radialSegments:32,thetaStart:0,thetaLength:2*Math.PI/r}),p=new l(e.program,{width:.5,z:.25,rotateY:90}),d=new l(e.program,{width:.5,rotateY:o-90,z:.25*Math.cos(o*Math.PI/180),x:.25*Math.sin(o*Math.PI/180)});const h=e.layer.createText(`${t.data[a].title}|${t.data[a].num}`,{font:"48px Arial",fillColor:"#fff"}),g=e.layer.createProgram({...u.NORMAL_TEXTURE,texture:h,cullFace:null}),b=new l(g,{width:.15,height:.15,z:.4*Math.cos(Math.PI/r),x:.4*Math.sin(Math.PI/r),rotateX:-90,rotateY:360/r/2,colors:"rgba(0,0,0,0)",id:"text",bgcolor:"transparent"});i.append(f,d,p,b),n.push(i)}return n.forEach((function(e,r){e.childNodes.forEach((function(e){"text"!=e.id?(e.attributes.height=t.rangeData[r]-0,e.attributes.y=t.rangeData[r]/2-.1):e.attributes.y=t.rangeData[r]-.099,e.attributes.colors=t.colors[r]})),e.attributes.rotateY=360*r/n.length,e.attributes.scale=[1.5,1.5,1.5],e.attributes.y=-.5})),n}(this.options,p);p.layer.append(...t)},bindEvent:function(){},initPieBackGround:function(){let t=this.options.data.length-this.options.colors.length;if(t)for(let e=0;e<t;e++)this.options.colors.push(`rgba(${Math.floor(255*Math.random())}, ${Math.floor(255*Math.random())}, ${Math.floor(255*Math.random())}, 1)`)}};e.default=d}])}));